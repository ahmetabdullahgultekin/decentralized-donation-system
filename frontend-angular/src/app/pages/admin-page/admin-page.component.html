<div class="container">
  <h1>Admin Dashboard</h1>
  <p>Manage the donation smart contract address and ABI.</p>

  <div class="add-organization-container">
    <h2 class="form-title">Add Organization</h2>
    <p class="form-description">Add a new organization to the platform by filling out the details below.</p>

    <!-- Organization Name -->
    <div class="form-group">
      <label for="orgName">Organization Name</label>
      <input
        [(ngModel)]="organization.name"
        class="form-control"
        id="orgName"
        placeholder="Enter organization name"
        required
        type="text"
      />
    </div>

    <!-- Organization Address -->
    <div class="form-group">
      <label for="orgAddress">Organization Address</label>
      <input
        [(ngModel)]="organization.address"
        class="form-control"
        id="orgAddress"
        placeholder="Enter Ethereum address (0x...)"
        required
        type="text"
      />
    </div>

    <!-- Reputation Score
    <div class="form-group">
      <label for="orgReputation">Reputation Score</label>
      <input
        id="orgReputation"
        [(ngModel)]="organization.reputation"
        type="number"
        class="form-control"
        placeholder="Enter reputation score"
        min="0"
        required
      />
    </div>
    -->

    <!-- Donor Address Input
    <div class="donor-input">
      <label for="donorAddress">Enter Donor Address:</label>
      <input
        type="text"
        id="donorAddress"
        [(ngModel)]="donorAddress"
        placeholder="0x123..."
      />
      <label for="donorAddress">Enter Donation ID:</label>
      <input
        type="text"
        id="donorId"
        [(ngModel)]="donationId"
        placeholder="0x123..."
      />
      -->
    <!-- Fetch Donor Donations Button
    <button (click)="fetchDonorDonations()">View Donations</button>
  </div>
    -->


    <!-- Donor's Donations
    <div *ngIf="donations.length > 0" class="donation-list">
      <h3>Donations by {{ donorAddress }}</h3>
      <table>
        <thead>
        <tr>
          <th>ID</th>
          <th>Amount</th>
          <th>Reveal Due Date</th>
          <th>Revealed</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let donation of donations">
          <td>{{ donation.id }}</td>
          <td>{{ donation.amount }}</td>
          <td>{{ donation.revealDueDate | date }}</td>
          <td>{{ donation.revealed ? 'Yes' : 'No' }}</td>
        </tr>
        </tbody>
      </table>
    </div>
    -->

    <!-- Organization Level -->
    <div class="form-group">
      <label for="orgLevel">Organization Level</label>
      <select [(ngModel)]="organization.level" class="form-control" id="orgLevel" required>
        <option value="Bronze">Bronze</option>
        <option value="Silver">Silver</option>
        <option value="Gold">Gold</option>
      </select>
    </div>

    <!-- Submit Button -->
    <div class="form-actions">
      <button (click)="addOrganization()" class="button">Add Organization</button>
    </div>

    <h2>Donor Penalty Management</h2>


    <!-- Apply Penalty -->
    <div class="form-group">
      <h4>Apply Penalty</h4>
      <label for="donationId">Enter Donation ID:</label>
      <input
        [(ngModel)]="selectedDonationId"
        class="form-control"
        id="donationId"
        placeholder="Enter Donation ID"
        type="number"
      />
      <label for="donorAddress">Enter Donor Address:</label>
      <input
        [(ngModel)]="donorAddress"
        class="form-control"
        id="donorAddress"
        placeholder="0x123..."
        type="text"
      />
      <button (click)="applyPenalty()" class="button">Apply Penalty</button>
    </div>
  </div>


  <!-- Select SmartContract Type -->
  <div class="form-group">
    <label for="contractType">Select SmartContract Type:</label>
    <select #selectElement (change)="loadContractDetails(selectElement.selectedIndex)" class="form-control"
            id="contractType">
      <option *ngFor="let contract of contractTypes" [value]="contract.name">
        {{ contract.name }}
      </option>
    </select>
  </div>

  <!-- SmartContract Address Section -->
  <div class="form-group">
    <label for="contractAddress">SmartContract Address:</label>
    <input
      [(ngModel)]="updatedAddress"
      class="form-control"
      id="contractAddress"
      placeholder="Enter contract address"
      type="text"
    />
  </div>

  <!-- SmartContract ABI Section -->
  <div class="form-group">
    <label for="contractAbi">SmartContract ABI:</label>
    <textarea
      [(ngModel)]="updatedAbi"
      class="form-control"
      id="contractAbi"
      placeholder="Enter contract ABI (JSON format)"
      rows="10"
    ></textarea>
  </div>

  <!-- Action Buttons -->
  <div class="form-actions">
    <button (click)="saveContractDetails()" class="button save">Save</button>
  </div>

  <!-- Display Current SmartContract Details -->
  <div class="details">
    <h3>Current SmartContract Details</h3>
    <p><strong>SmartContract Type:</strong> {{ getContractName(selectedContractIndex) }}</p>
    <p><strong>Address:</strong> {{ contractAddress }}</p>
    <pre><strong>ABI:</strong> {{ contractAbi }}</pre>
  </div>
</div>
